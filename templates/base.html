{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{% block title %}Bambicim{% endblock %}</title>
    {% block meta %}{% endblock %}
    <link rel="icon" href="{% static 'images/png/pink-butterfly-2.png' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block head_extra %}{% endblock %}
</head>
<body>
<header class="site-header">
    <div class="b-container nav-inner">
        <a class="brand" href="/">BAMBİCİM</a>

        <nav class="nav" role="navigation" aria-label="Primary">
            <a href="/#work">Work</a>
            <a href="/#game">Bambi Game</a>
            <a href="/#contact">Let’s talk</a>
            <a href="/blog/">Blog</a>
            <a href="/admin/" class="is-primary">Admin</a>
        </nav>

        <form action="{% url 'search' %}" method="get" class="nav-search" role="search" aria-label="Site search">
            <input id="nav-search-input" name="q" value="{{ request.GET.q }}" placeholder="Search Bambicim…"
                   autocomplete="off" inputmode="search"/>
            <button type="submit" aria-label="Search">Search</button>
        </form>

        <div class="auth">
            {% if request.user.is_authenticated %}
                <span>Hi, {{ request.user.first_name|default:request.user.username|default:"bambi" }}</span>
                {% url 'account_logout' as logout_url %}
                <a href="{{ logout_url|default:'/accounts/logout/' }}">Log out</a>
            {% else %}
                {% url 'account_login' as login_url %}<a href="{{ login_url|default:'/accounts/login/' }}">Log in</a>
            {% endif %}
        </div>

        <div class="theme-toggle" aria-label="Theme">
            <button type="button" class="swatch" data-theme="pink" title="Pink"></button>
            <button type="button" class="swatch hot" data-theme="hot" title="Hot Pink"></button>
            <button type="button" class="swatch" data-theme="dark" title="Violet"></button>
            <button type="button" class="swatch white" data-theme="white" title="White"></button>
        </div>
    </div>
</header>

<main>{% block content %}{% endblock %}</main>

<footer class="b-container">
    <div class="f-grid">
        <div class="f-brand">
            <div class="logo">BAMBİCİM</div>
            <p class="muted">Princess-pink software, built fast & beautifully.</p>
        </div>
        <div class="f-col">
            <h4>Explore</h4>
            <a href="/#work">Work</a>
            <a href="/#game">Bambi Game</a>
            <a href="/blog/">Blog</a>
        </div>
        <div class="f-col">
            <h4>Company</h4>
            <a href="/privacy/">Privacy</a>
            <a href="/terms/">Terms</a>
        </div>
        <div class="f-col">
            <h4>Contact</h4>
            <a href="mailto:ipek@bambicim.com">ipek@bambicim.com</a>
            <a href="/#contact">Let’s talk</a>
        </div>
    </div>
    <div class="b-footer">
        <span class="muted">© {% now "Y" %} Bambicim — built with lots of pink.</span>
    </div>
</footer>

<script>
    // Quick UX: "/" focuses search (unless typing)
    document.addEventListener("keydown", (e) => {
        const tag = document.activeElement?.tagName;
        if (e.key === "/" && tag !== "INPUT" && tag !== "TEXTAREA" && !e.metaKey && !e.ctrlKey) {
            const el = document.getElementById("nav-search-input");
            if (el) {
                e.preventDefault();
                el.focus();
                el.select();
            }
        }
    });

    // Theme dots
    (function () {
        const KEY = "b_theme";
        const root = document.body;
        root.setAttribute("data-theme", localStorage.getItem(KEY) || "pink");
        document.querySelectorAll(".theme-toggle .swatch").forEach((b) =>
            b.addEventListener("click", () => {
                const t = b.dataset.theme || "pink";
                root.setAttribute("data-theme", t);
                localStorage.setItem(KEY, t);
            })
        );
    })();
</script>

{# single spot for page-specific JS #}
{% block scripts %}{% endblock %}
</body>
</html>
