{% load static %}
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{% block title %}Bambicim — Innovative Software Studio{% endblock %}</title>
    <meta name="description"
          content="{% block meta_description %}Bambi’s playful portfolio, code, and tiny adventures.{% endblock %}">
    <meta property="og:site_name" content="Bambicim">
    <meta property="og:title" content="{% block og_title %}Bambicim{% endblock %}">
    <meta property="og:description"
          content="{% block og_description %}Bambi’s playful portfolio, code, and tiny adventures.{% endblock %}">
    <meta property="og:type" content="website">
    <meta property="og:url" content="{{ request.build_absolute_uri|default:'' }}">
    <meta property="og:image" content="{% static 'images/png/og-default.png' %}">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{% block tw_title %}Bambicim{% endblock %}">
    <meta name="twitter:description"
          content="{% block tw_desc %}Bambi’s playful portfolio, code, and tiny adventures.{% endblock %}">
    <meta name="twitter:image" content="{% static 'images/png/og-default.png' %}">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="icon" href="{% static 'images/svg/butterfly.svg' %}">
    {% block head %}{% endblock %}
</head>

<body class="b-bg b-text" data-theme="pink">
{# ---------- Top nav ---------- #}
<header class="b-nav">
    <a href="{% url 'home' %}" class="brand">BAMBİCİM</a>

    <nav class="main-nav">
        {# Use absolute anchors so they work from any page #}
        <a class="pill" href="{% url 'home' %}#work" data-anchor="work">Work</a>
        <a class="pill" href="{% url 'home' %}#game" data-anchor="game">Bambi Game</a>
        <a class="pill" href="{% url 'home' %}#contact" data-anchor="contact">Let’s talk</a>

        {# Staff-only quick link to Django admin #}
        {% if request.user.is_staff %}
            <a class="pill ghost admin-only" href="{% url 'admin:index' %}">Admin</a>
        {% endif %}
    </nav>

    <div class="auth">
        {% if request.user.is_authenticated %}
            <a href="{% url 'profile' %}" class="nav-user">Hi, {{ request.user.username }}</a>
            <form action="{% url 'logout' %}" method="post" style="display:inline">{% csrf_token %}
                <button class="btn btn--light" type="submit">Log out</button>
            </form>
        {% else %}
            <a class="btn btn--ghost" href="{% url 'login' %}">Sign in</a>
            <a class="btn btn--solid" href="{% url 'signup' %}">Sign up</a>
        {% endif %}

        <div class="theme-toggle" aria-label="Theme">
            <button type="button" class="swatch" data-set-theme="pink" title="Princess Pink"></button>
            <button type="button" class="swatch hot" data-set-theme="hot" title="Hot Pink"></button>
            <button type="button" class="swatch white" data-set-theme="white" title="Snow White"></button>
        </div>
    </div>
</header>

{# ---------- Page content ---------- #}
<main id="content">
    {% block content %}{% endblock %}
</main>

{# ---------- Footer ---------- #}
<footer class="b-container b-footer">
    <span>© <span id="y"></span> Bambicim</span>
    <span class="muted">Made with ✨ in Türkiye</span>
</footer>

{# year + smooth scroll for home-page anchors #}
<script>
    // footer year
    document.getElementById('y').textContent = new Date().getFullYear();

    // If we're already on the home page, make anchor clicks smooth-scroll instead of reloading.
    (function () {
        var onHome = location.pathname === "{% url 'home' %}";
        if (!onHome) return; // from other pages we want the normal navigation to /#id

        document.querySelectorAll('a[data-anchor]').forEach(function (a) {
            a.addEventListener('click', function (e) {
                var id = a.getAttribute('data-anchor');
                var target = document.getElementById(id);
                if (target) {
                    e.preventDefault();
                    target.scrollIntoView({behavior: 'smooth', block: 'start'});
                    history.replaceState(null, '', '#' + id);
                }
            });
        });
    })();
</script>

<script defer src="{% static 'js/script.js' %}"></script>
<script defer src="{% static 'game/engine.js' %}"></script>
<script src="{% static 'game/achievements.js' %}"></script>
{% include "components/chatbot.html" %}
<script>window.BAMBI_MODE = "http";</script>
<link rel="stylesheet" href="{% static 'css/chatbot.css' %}">
<script defer src="{% static 'js/chatbot.js' %}"></script>

</body>
</html>
