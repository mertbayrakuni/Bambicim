{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{% block title %}Bambicim{% endblock %}</title>
    {% block meta %}{% endblock %}

    {# Favicons (make sure these files exist; see notes below) #}
    <link rel="icon" type="image/png" sizes="192x192" href="{% static 'images/png/pink-butterfly-2.png' %}">

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    {% block head_extra %}{% endblock %}
</head>
<body>

<header class="site-header">
    <div class="b-container nav-inner">
        <a class="brand" href="/">BAMBİCİM</a>

        <nav class="nav" role="navigation" aria-label="Primary">
            <a href="/#work">Work</a>
            <a href="/#bambi-game">Bambi Game</a>
            <a href="/contact/">Let’s talk</a>
            <a href="/blog/">Blog</a>
            <a href="{% url 'editor' %}" class="hide-sm">Editor</a>
            <a href="/admin/" class="is-primary">Admin</a>
        </nav>

        <!-- Header search -->
        <form action="{% url 'search' %}" method="get" class="nav-search" role="search" aria-label="Site search">
            <input
                    id="nav-search-input"
                    name="q"
                    value="{{ request.GET.q }}"
                    placeholder="Search Bambicim…"
                    autocomplete="off"
                    inputmode="search"
            />
            <button type="submit" aria-label="Search">Search</button>
        </form>

        <!-- Auth -->
        <div class="auth">
            {% if request.user.is_authenticated %}
                <span>Hi, {{ request.user.first_name|default:request.user.username|default:"bambi" }}</span>
                {% url 'account_logout' as logout_url %}
                <a href="{{ logout_url|default:'/accounts/logout/' }}">Log out</a>
            {% else %}
                {% url 'account_login' as login_url %}
                <a href="{{ login_url|default:'/accounts/login/' }}">Log in</a>
            {% endif %}
        </div>
    </div>
</header>

<main>
    {% block content %}{% endblock %}
</main>

<footer class="b-container py-12">
    {% block footer %}
        <p class="muted">© {% now "Y" %} Bambicim — built with lots of pink.</p>
    {% endblock %}
</footer>

{% block scripts %}{% endblock %}

<script>
    // Quick UX: press "/" to focus the header search unless typing already
    document.addEventListener("keydown", (e) => {
        const tag = document.activeElement?.tagName;
        if (e.key === "/" && tag !== "INPUT" && tag !== "TEXTAREA" && !e.metaKey && !e.ctrlKey) {
            const el = document.getElementById("nav-search-input");
            if (el) {
                e.preventDefault();
                el.focus();
                el.select();
            }
        }
    });
</script>

</body>
</html>
